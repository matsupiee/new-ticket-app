generator client {
  provider     = "prisma-client"
  output       = "../src/generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
}

generator nestgraphql {
  provider           = "node node_modules/prisma-nestjs-graphql"
  output             = "../src/generated/prisma-nestjs-graphql" // graphql用の型の生成ファイルの置き場所
  prismaClientImport = "src/generated/prisma/client"
  emitSingle         = true // 生成結果を1ファイルにまとめる

  omitModelsCount = true
  emitBlocks      = ["inputs", "models", "enums"]

  // カスタムスカラーに型をつける
  fields_Scalars_from   = "src/common/scalars"
  fields_Scalars_input  = true
  fields_Scalars_output = true
}

// モデル定義のルール
// id, createdAt, updatedAtはモデルの上の方に必ず定義すること
// リレーションはモデルの下の方に定義すること
// 全てのリレーションは@HideField()を使って非表示にすること(GraphQLを使う場合、ネストして色んな情報にアクセスできるというセキュリティホールが生まれてしまうため)
// prisma/models/*.prismaのどのグループにも入らないモデルは、schema.prisma内に定義する

// トップページ上部に特別に表示するイベント
model FeaturedEvent {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  eventId   String @unique
  sortOrder Int    @default(0)

  publishAt DateTime?
  endAt     DateTime?

  /// @HideField()
  event Event @relation(fields: [eventId], references: [id])
}

// 申込時に「お目当てのアーティストを教えてください」という質問を行う
// その回答を管理する
// model FavoriteArtistSurvey {
//   createdAt DateTime @default(now())
//   updatedAt DateTime @default(now()) @updatedAt

//   orderId  String
//   artistId String

//   artist Artist @relation(fields: [artistId], references: [id])
// }
